<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wine Flashcards</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Garamond', 'Cormorant Garamond', 'Georgia', serif;
            background: #1a1410;
            background-image: 
                radial-gradient(circle at 20% 50%, rgba(139, 115, 85, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(139, 115, 85, 0.1) 0%, transparent 50%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            max-width: 800px;
            width: 100%;
        }

        .header {
            text-align: center;
            color: #d4af77;
            margin-bottom: 30px;
            border-bottom: 2px solid rgba(212, 175, 119, 0.3);
            padding-bottom: 20px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 5px;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.8);
            font-weight: 300;
            letter-spacing: 3px;
        }

        .header .restaurant-name {
            font-size: 1.8em;
            color: #c9a961;
            font-family: 'Garamond', 'Georgia', serif;
            font-style: italic;
            margin: 10px 0;
            letter-spacing: 2px;
        }

        .header p {
            color: #a89168;
            font-style: italic;
            letter-spacing: 1px;
            font-size: 0.9em;
        }

        .mode-selector {
            background: rgba(212, 175, 119, 0.1);
            border: 1px solid rgba(212, 175, 119, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
        }

        .mode-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .mode-btn {
            padding: 10px 20px;
            border: 2px solid #d4af77;
            border-radius: 8px;
            background: rgba(26, 20, 16, 0.6);
            color: #d4af77;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            font-family: 'Garamond', 'Georgia', serif;
        }

        .mode-btn.active {
            background: linear-gradient(135deg, #d4af77 0%, #c9a961 100%);
            color: #1a1410;
            box-shadow: 0 4px 12px rgba(212, 175, 119, 0.4);
        }

        .mode-btn:hover {
            background: rgba(212, 175, 119, 0.2);
            transform: translateY(-2px);
        }

        .filter-section {
            margin-top: 15px;
        }

        .filter-buttons {
            display: flex;
            gap: 8px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 16px;
            border: 1px solid #d4af77;
            border-radius: 6px;
            background: rgba(26, 20, 16, 0.4);
            color: #d4af77;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            font-family: 'Garamond', 'Georgia', serif;
        }

        .filter-btn.active {
            background: #d4af77;
            color: #1a1410;
            box-shadow: 0 2px 8px rgba(212, 175, 119, 0.3);
        }

        .filter-btn:hover {
            background: rgba(212, 175, 119, 0.2);
        }

        .quiz-container {
            background: linear-gradient(135deg, #2a2218 0%, #1a1410 100%);
            border: 1px solid rgba(212, 175, 119, 0.3);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .quiz-question {
            font-size: 24px;
            color: #d4af77;
            margin-bottom: 25px;
            text-align: center;
            font-weight: 400;
            letter-spacing: 1px;
        }

        .quiz-options {
            display: grid;
            gap: 15px;
        }

        .quiz-option {
            padding: 15px 20px;
            border: 2px solid rgba(212, 175, 119, 0.3);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            background: rgba(26, 20, 16, 0.6);
            text-align: left;
            color: #d4af77;
        }

        .quiz-option strong {
            color: #d4af77;
        }

        .quiz-option small {
            color: #a89168;
        }

        .quiz-option:hover {
            border-color: #d4af77;
            background: rgba(212, 175, 119, 0.1);
            transform: translateX(5px);
        }

        .quiz-option.correct {
            border-color: #6da34d;
            background: rgba(109, 163, 77, 0.2);
            color: #a8d88f;
        }

        .quiz-option.incorrect {
            border-color: #c85a54;
            background: rgba(200, 90, 84, 0.2);
            color: #d4af77;
        }

        .quiz-option.disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }

        .quiz-feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
            font-style: italic;
        }

        .quiz-feedback.correct {
            background: rgba(109, 163, 77, 0.2);
            border: 1px solid #6da34d;
            color: #a8d88f;
        }

        .quiz-feedback.incorrect {
            background: rgba(200, 90, 84, 0.2);
            border: 1px solid #c85a54;
            color: #e8b4b0;
        }

        .quiz-score {
            background: rgba(212, 175, 119, 0.1);
            border: 1px solid rgba(212, 175, 119, 0.3);
            border-radius: 10px;
            padding: 15px;
            color: #d4af77;
            text-align: center;
            margin-bottom: 20px;
            font-size: 18px;
            font-weight: 600;
        }

        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            font-family: 'Garamond', 'Georgia', serif;
        }

        .btn-primary {
            background: linear-gradient(135deg, #d4af77 0%, #c9a961 100%);
            color: #1a1410;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(212, 175, 119, 0.4);
        }

        .btn-secondary {
            background: rgba(212, 175, 119, 0.2);
            color: #d4af77;
            border: 2px solid #d4af77;
        }

        .btn-secondary:hover {
            background: rgba(212, 175, 119, 0.3);
        }

        .progress {
            background: rgba(212, 175, 119, 0.1);
            border: 1px solid rgba(212, 175, 119, 0.3);
            border-radius: 10px;
            padding: 15px;
            color: #d4af77;
            text-align: center;
            margin-bottom: 20px;
            font-size: 18px;
            font-weight: 600;
            letter-spacing: 1px;
        }

        .card-container {
            perspective: 1000px;
            margin-bottom: 20px;
        }

        .card {
            width: 100%;
            height: 400px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
        }

        .card.flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 15px;
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .card-front {
            background: linear-gradient(135deg, #2a2218 0%, #1a1410 100%);
            border: 2px solid rgba(212, 175, 119, 0.3);
        }

        .card-back {
            background: linear-gradient(135deg, #2a2218 0%, #1a1410 100%);
            border: 2px solid rgba(212, 175, 119, 0.3);
            transform: rotateY(180deg);
        }

        .wine-name {
            font-size: 28px;
            font-weight: 400;
            color: #d4af77;
            margin-bottom: 15px;
            text-align: center;
            letter-spacing: 1px;
        }

        .wine-type {
            font-size: 18px;
            color: #c9a961;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 300;
        }

        .wine-region {
            font-size: 16px;
            color: #a89168;
            margin-bottom: 20px;
            font-style: italic;
        }

        .wine-details {
            font-size: 15px;
            line-height: 1.8;
            color: #d4af77;
            text-align: left;
            max-height: 250px;
            overflow-y: auto;
        }

        .wine-details::-webkit-scrollbar {
            width: 8px;
        }

        .wine-details::-webkit-scrollbar-track {
            background: rgba(212, 175, 119, 0.1);
            border-radius: 4px;
        }

        .wine-details::-webkit-scrollbar-thumb {
            background: rgba(212, 175, 119, 0.3);
            border-radius: 4px;
        }

        .wine-details::-webkit-scrollbar-thumb:hover {
            background: rgba(212, 175, 119, 0.5);
        }

        .flip-hint {
            position: absolute;
            bottom: 20px;
            font-size: 14px;
            color: #a89168;
            font-style: italic;
        }

        .navigation {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .nav-btn {
            padding: 15px 30px;
            font-size: 18px;
        }

        @media (max-width: 600px) {
            .header h1 {
                font-size: 2em;
            }
            
            .card {
                height: 450px;
            }
            
            .card-face {
                padding: 25px;
            }
            
            .wine-name {
                font-size: 22px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üç∑ Wine Study Guide üç∑</h1>
            <div class="restaurant-name">The Beirut</div>
            <p>Server Training ‚Ä¢ North & South American Reds</p>
        </div>

        <div class="mode-selector">
            <div class="mode-buttons">
                <button class="mode-btn active" onclick="setMode('flashcard')">üìö Flashcards</button>
                <button class="mode-btn" onclick="setMode('quiz')">üéØ Flavor Quiz</button>
            </div>
            <div class="filter-section" id="filterSection">
                <div class="filter-buttons">
                    <button class="filter-btn active" onclick="setFilter('all')">All Wines</button>
                    <button class="filter-btn" onclick="setFilter('region', 'north')">North America</button>
                    <button class="filter-btn" onclick="setFilter('region', 'south')">South America</button>
                    <button class="filter-btn" onclick="setFilter('varietal', 'Cabernet Sauvignon')">Cabernet Sauv.</button>
                    <button class="filter-btn" onclick="setFilter('varietal', 'Pinot Noir')">Pinot Noir</button>
                    <button class="filter-btn" onclick="setFilter('varietal', 'Malbec')">Malbec</button>
                    <button class="filter-btn" onclick="setFilter('varietal', 'Bordeaux Blend')">Bordeaux Blend</button>
                </div>
            </div>
        </div>

        <!-- Flashcard Mode -->
        <div id="flashcardMode">
            <div class="controls">
                <button class="btn btn-primary" onclick="shuffleCards()">üîÄ Shuffle</button>
                <button class="btn btn-secondary" onclick="resetProgress()">‚Ü∫ Reset</button>
            </div>

            <div class="progress" id="progress">
                Card 1 of 30
            </div>

            <div class="card-container">
                <div class="card" id="card" onclick="flipCard()">
                    <div class="card-face card-front">
                        <div class="wine-name" id="wineName"></div>
                        <div class="wine-type" id="wineType"></div>
                        <div class="wine-region" id="wineRegion"></div>
                        <div class="flip-hint">Click to see details ‚Üí</div>
                    </div>
                    <div class="card-face card-back">
                        <div class="wine-details" id="wineDetails"></div>
                        <div class="flip-hint">Click to go back ‚Üí</div>
                    </div>
                </div>
            </div>

            <div class="navigation">
                <button class="btn btn-primary nav-btn" onclick="previousCard()">‚Üê Previous</button>
                <button class="btn btn-primary nav-btn" onclick="nextCard()">Next ‚Üí</button>
            </div>
        </div>

        <!-- Quiz Mode -->
        <div id="quizMode" style="display: none;">
            <div class="quiz-score" id="quizScore">
                Score: 0 / 0
            </div>

            <div class="quiz-container">
                <div class="quiz-question" id="quizQuestion"></div>
                <div class="quiz-options" id="quizOptions"></div>
                <div class="quiz-feedback" id="quizFeedback" style="display: none;"></div>
            </div>

            <div class="navigation">
                <button class="btn btn-primary nav-btn" onclick="nextQuizQuestion()">Next Question ‚Üí</button>
            </div>
        </div>
    </div>

    <script>
        const allWines = [
            // North American Reds
            {
                name: "Chappellet Cuv√©e",
                type: "Bordeaux Blend",
                region: "Napa Valley, California",
                continent: "north",
                details: "Blend: Cabernet Sauvignon, Cabernet Franc, Merlot, Malbec, Petit Verdot. Lush, layered, and complex. Notes of cherry, plum, clove, coffee, and chocolate.",
                flavors: ["cherry", "plum", "coffee", "chocolate", "complex", "layered"]
            },
            {
                name: "Turley Del Barba",
                type: "Zinfandel",
                region: "Contra Costa, California",
                continent: "north",
                details: "Elegant and medium-bodied with fine tannins. Flavors of red cherry, licorice, and Earl Grey tea.",
                flavors: ["red cherry", "licorice", "tea", "elegant", "medium-bodied"]
            },
            {
                name: "Clark & Telephone",
                type: "Pinot Noir",
                region: "Santa Maria Valley, California",
                continent: "north",
                details: "Bold, opulent, and fruit-forward with deep color and lush velvety texture. Key notes of blackberry, baking spices, and cocoa. Flavors of crushed cherry, raspberry, and oak with polished tannins.",
                flavors: ["blackberry", "cherry", "raspberry", "spices", "cocoa", "bold", "fruit-forward"]
            },
            {
                name: "EnRoute Far Niente",
                type: "Pinot Noir",
                region: "Russian River, California",
                continent: "north",
                details: "Silky texture aged in French oak with fine-grained tannins. Aromas of red cherries, wild raspberry, rose petal, clove, and cola. Broad and vibrant with flavors of black cherry, plum tart, and preserves. Long elegant finish with notes of dark chocolate and tea.",
                flavors: ["cherry", "raspberry", "rose", "cola", "chocolate", "tea", "silky", "elegant"]
            },
            {
                name: "Austin Hope",
                type: "Cabernet Sauvignon",
                region: "Paso Robles, California",
                continent: "north",
                details: "Flavors of blackberry, cherry, and plum with notes of mocha, vanilla, nutmeg, brown butter, and spice. Smooth finish with smooth tannins. Aged in French and American oak. Pairs well with aged cheeses and grilled meats.",
                flavors: ["blackberry", "cherry", "plum", "mocha", "vanilla", "nutmeg", "spice"]
            },
            {
                name: "Duckhorn",
                type: "Cabernet Sauvignon",
                region: "Napa Valley, California",
                continent: "north",
                details: "Medium to full-bodied with bright acidity. Flavors of blackberry and black raspberry with rich chocolate tannins and notions of black tea and oak. Sophisticated with a long luxurious finish.",
                flavors: ["blackberry", "raspberry", "chocolate", "tea", "oak", "sophisticated"]
            },
            {
                name: "Epoch Estate",
                type: "Red Blend",
                region: "Paso Robles, California",
                continent: "north",
                details: "Full-bodied and thick. Complex Rh√¥ne-style blend: Syrah, Grenache, Mourv√®dre, Tempranillo, Zinfandel, and Graciano. Rich flavors of dark berries with savory notes of herbs and leather. Firm tannins and long finish. Aged in French oak. Benefits from decanting.",
                flavors: ["dark berries", "herbs", "leather", "complex", "savory", "full-bodied"]
            },
            {
                name: "Willful Wine Cuv√©e",
                type: "Pinot Noir",
                region: "Willamette Valley, Oregon",
                continent: "north",
                details: "Flavors of red cherry, cranberry, strawberry, and candied red apple. Earthy and spicy with licorice, pepper, and lavender. Other notes: hibiscus tea, tobacco, oak, and vanilla. Aged in French oak. Elegant with balanced acidity and silky texture. Pairs well with mushrooms, chicken, pork, duck, salmon, and lamb.",
                flavors: ["cherry", "cranberry", "strawberry", "earthy", "spicy", "pepper", "lavender", "elegant"]
            },
            {
                name: "Quilt Reserve",
                type: "Cabernet Sauvignon",
                region: "Napa Valley, California",
                continent: "north",
                details: "Luxurious, full-bodied, and plush with deep ruby color. Intense ripe notes of blackberry jam, dark chocolate, cr√®me de cassis (black currants), toasted hazelnut. Velvety rich texture aged in French oak with structured tannins and smooth finish.",
                flavors: ["blackberry", "chocolate", "cassis", "hazelnut", "luxurious", "velvety", "plush"]
            },
            {
                name: "Adobe Road Blue Dog",
                type: "Cabernet Sauvignon",
                region: "Sonoma County, California",
                continent: "north",
                details: "Rich dark fruit flavors of plum and blackberry with notes of spice, oak, and a smooth long finish. Blends grapes from both Napa and Sonoma regions, combining Napa's dark fruit and texture with Sonoma's spicy complexity. Luxurious and well-balanced.",
                flavors: ["plum", "blackberry", "spice", "oak", "rich", "balanced"]
            },
            {
                name: "Caymus",
                type: "Cabernet Sauvignon",
                region: "Napa Valley, California",
                continent: "north",
                details: "Fruit-forward with deep dark fruit. Flavors of blackberry, cherry, cassis, cocoa, vanilla, and sweet tobacco. Rich velvety texture with soft tannins. Aged in oak.",
                flavors: ["blackberry", "cherry", "cassis", "cocoa", "vanilla", "tobacco", "fruit-forward", "velvety"]
            },
            {
                name: "Artemis Stags Leap",
                type: "Cabernet Sauvignon",
                region: "Napa Valley, California",
                continent: "north",
                details: "Nose reveals aromas of dark fruits, tobacco, ripe figs, raspberries, and cherry with subtle hint of oak. Silky in the mouth with long savory finish showcasing chocolate, dark cherry, and other berry notes.",
                flavors: ["dark fruits", "tobacco", "figs", "cherry", "chocolate", "silky", "savory"]
            },
            {
                name: "Papillon Orin Swift",
                type: "Bordeaux Blend",
                region: "Napa Valley, California",
                continent: "north",
                details: "Blend: Cabernet Sauvignon, Cabernet Franc, Malbec, and Petit Verdot. Aromatic notes of ripe cassis, blackberry, cedar box, and allspice. Round and weighty flavor with finishing notes of Madagascar vanilla and toffee. Aged in French oak.",
                flavors: ["cassis", "blackberry", "cedar", "allspice", "vanilla", "toffee"]
            },
            {
                name: "Bevan Cellars",
                type: "Pinot Noir",
                region: "Petaluma Gap, California",
                continent: "north",
                details: "Rich and full-bodied (appeals to Cabernet lovers). Intense fruit flavors like black cherry and pomegranate with complex spice notes and plush silky tannins. Notes of cola, tea, and baking spices. Plush and silky with round mid-palate. Long finish with hints of toasted oak and vanilla.",
                flavors: ["cherry", "pomegranate", "cola", "tea", "spices", "oak", "vanilla", "full-bodied", "plush"]
            },
            {
                name: "Silver Oak",
                type: "Cabernet Sauvignon",
                region: "Alexander Valley, California",
                continent: "north",
                details: "Soft and velvety, fruit-forward at the core. Strong notes of blackberry, blackcurrant, plum, and dark cherry. Aged in American oak adding layers of vanilla, cedar, spice, clove, and sweet baking notes. Hints of tobacco, minerals, and coffee beans in the aromas.",
                flavors: ["blackberry", "blackcurrant", "plum", "cherry", "vanilla", "cedar", "tobacco", "coffee", "velvety"]
            },
            {
                name: "Darioush",
                type: "Cabernet Sauvignon",
                region: "Napa Valley, California",
                continent: "north",
                details: "Rich notes of black currant, plum, black raspberry, and blueberry. Aromas include sun-dried fig, graphite, cedar, and spiced sandalwood. Full-bodied, velvety, and dense with long structured finish lingering with spice, fruit, and oak notes.",
                flavors: ["currant", "plum", "raspberry", "blueberry", "fig", "cedar", "spice", "full-bodied", "velvety"]
            },
            {
                name: "Dunn Vineyards",
                type: "Cabernet Sauvignon",
                region: "Napa Valley, California",
                continent: "north",
                details: "Deep aromas of blackcurrant, black cherry, blueberry, spicy cedarwood, hints of violets, and dried herbs. Medium to full-bodied with inky dark fruits such as plum, mocha, leather, sage, and licorice. Polished yet firm tannins.",
                flavors: ["blackcurrant", "cherry", "blueberry", "cedar", "violets", "herbs", "mocha", "leather", "licorice"]
            },
            {
                name: "Aloft",
                type: "Cabernet Sauvignon",
                region: "Howell Mountain, California",
                continent: "north",
                details: "Dark fruits including blackberry, blackcurrant, and black cherry with hints of black pepper, sun-dried thyme, oregano, lavender, and savory herbs. Rich fruit core with tobacco leaf, coffee bean, black leaf tea, and licorice. Oaky finish. Medium to full-bodied with fine tannins (can be chalky early on). Benefits from decanting.",
                flavors: ["blackberry", "blackcurrant", "cherry", "pepper", "herbs", "tobacco", "coffee", "tea", "licorice", "savory"]
            },
            {
                name: "Opus One Overture",
                type: "Bordeaux Blend",
                region: "Napa Valley, California",
                continent: "north",
                details: "Aromas include bright cherry, plum, red currant, blackberry, and floral hints. Can be spicy and herby with anise, cocoa, and toasted almond. On the palate: juicy with notes of blueberry, wild cherry, plum, dark chocolate, coffee, vanilla, and mocha. Medium to full-bodied. French oak helps soften the tannins.",
                flavors: ["cherry", "plum", "currant", "blackberry", "floral", "anise", "cocoa", "chocolate", "coffee", "vanilla", "mocha"]
            },
            {
                name: "Harlan The Mascot",
                type: "Cabernet Sauvignon",
                region: "Napa Valley, California",
                continent: "north",
                details: "Aromas include red and dark fruits such as plum, raspberry, cherry, and blackberry with gentle floral notes of violets and savory undertones. Palate includes flavors of plum, black cherry, and currant making a broad and inviting mid-palate. Poised and bright wine with smooth fine tannins and approachable texture.",
                flavors: ["plum", "raspberry", "cherry", "blackberry", "floral", "violets", "savory", "bright"]
            },
            {
                name: "Caymus Special Selection",
                type: "Cabernet Sauvignon",
                region: "Napa Valley, California",
                continent: "north",
                details: "Aromas include rich blackberry, blackcurrant, and dark cherry with oak-derived spices like vanilla, cocoa, and warm spices from French oak aging. Tobacco, leather, and earthy notes. Very juicy palate with ripe fruits like blackberry, boysenberry, mulberry, and plum. Second layer includes espresso, chocolate, licorice, anise, and cedar. Full-bodied and plush.",
                flavors: ["blackberry", "blackcurrant", "cherry", "vanilla", "cocoa", "tobacco", "leather", "espresso", "chocolate", "plush", "full-bodied"]
            },
            {
                name: "Quintessa",
                type: "Cabernet Sauvignon",
                region: "Rutherford, California",
                continent: "north",
                details: "Aromas include ripe blackberry, cassis, and black cherry with subtle notes of violet, blueberry, cedar, graphite, vanilla, and touches of tobacco. Full-bodied and polished with concentrated dark fruit core like blackberry, boysenberry, plum, and blackcurrant. Layers of espresso and sweet oak spice. Velvety and fine-grained tannins. Well-rounded.",
                flavors: ["blackberry", "cassis", "cherry", "violet", "blueberry", "cedar", "vanilla", "tobacco", "espresso", "velvety", "full-bodied"]
            },
            // South American Reds
            {
                name: "Garzon Reserva",
                type: "Tannat",
                region: "Maldonado, Uruguay",
                continent: "south",
                details: "Bold & flavorful red. Aromas: juicy plum, blackberry, black cherry. Spices and herbs such as gentle violet and cardamom. Palate: concentrated ripe black and red fruits, including plum and raspberry leading the flavor. Secondary notes express some licorice, tobacco, or balsamic touches that accent the fruit. Hints of dark chocolate, cedar or black pepper can appear mid palate. Medium to full-bodied with a juicy presence.",
                flavors: ["plum", "blackberry", "cherry", "violet", "cardamom", "raspberry", "licorice", "tobacco", "chocolate", "cedar", "pepper", "bold", "juicy"]
            },
            {
                name: "El Enimigo",
                type: "Malbec",
                region: "Mendoza, Argentina",
                continent: "south",
                details: "Fermented with a small amount of Cabernet Franc. Rich concentrated and expressive that balances bold dark fruit, floral spice, and earthy tones. Firm but refined tannin with a long and elegant finish. Aromas: expressive blackberry, black cherry, plum, and dark berry. Hints of pepper, violet florals, and subtle spice for complexity. Palate: concentrated with blackberry, black cherry and plum. Medium to full-bodied with vibrant fruit profile.",
                flavors: ["blackberry", "cherry", "plum", "pepper", "violet", "floral", "spice", "earthy", "rich", "elegant"]
            },
            {
                name: "Vina Cobos Bramare",
                type: "Malbec",
                region: "Argentina",
                continent: "south",
                details: "Deep ruby or purple in color. Aromas: blackberry, red fruit, cassis. Accented by tobacco, black pepper, clove/cinnamon, and floral spice. Palate: bold dark fruit core including blackberry, plum, boysenberry. Cocoa, dark chocolate, and minerals on secondary notes. Full-bodied and intense. Velvety tannins but a polished texture. Long and layered finish.",
                flavors: ["blackberry", "cassis", "tobacco", "pepper", "clove", "cinnamon", "floral", "plum", "boysenberry", "cocoa", "chocolate", "minerals", "bold", "velvety", "full-bodied"]
            },
            {
                name: "Vina Vik Milla Cala",
                type: "Bordeaux Blend",
                region: "Chile",
                continent: "south",
                details: "Highlights both New World fruit intensity and Bordeaux-style structure. Aromas: blackberry, cherry, cassis. Violets, blue floral notes, herbs, and subtle eucalyptus spices. Vanilla, tobacco, and cedar oak influence from aging in French barrel. Palate: concentrated dark fruits carry the palate such as blackcurrant, plum, and blackberry. Secondary notes of dark chocolate, black pepper, clove, and mineral edges on the palate. Medium to full-bodied. Fine tannins.",
                flavors: ["blackberry", "cherry", "cassis", "violets", "floral", "herbs", "eucalyptus", "vanilla", "tobacco", "cedar", "plum", "chocolate", "pepper", "clove", "minerals"]
            },
            {
                name: "Gran Enimigo",
                type: "Cabernet Franc",
                region: "Argentina",
                continent: "south",
                details: "Primarily 85% Cabernet Franc, with a mix of Malbec. Aromas: concentrated dark fruits such as blackberry, plum, black cherry. Minerals and herbs hit the nose as well such as eucalyptus, thyme, and rosemary. Palate: vanilla, chocolate, spices, dark fruits. Full-bodied and structured. Elegance of old-world and balanced intensity.",
                flavors: ["blackberry", "plum", "cherry", "minerals", "herbs", "eucalyptus", "thyme", "rosemary", "vanilla", "chocolate", "spices", "elegant", "balanced", "full-bodied"]
            },
            {
                name: "Don Melchor",
                type: "Cabernet Sauvignon",
                region: "Chile",
                continent: "south",
                details: "Aromas: rich black cherry, blackberry, cassis, plum, dark chocolate, and espresso. Some spices of vanilla, cedar, and tobacco hit subtly. Full-bodied, rich and concentrated. Pairs great with red meats with a long and elegant finish. Lingering fruit and spice finish.",
                flavors: ["cherry", "blackberry", "cassis", "plum", "chocolate", "espresso", "vanilla", "cedar", "tobacco", "rich", "elegant", "full-bodied"]
            }
        ];

        const flavorProfiles = [
            { description: "Bold and fruit-forward with rich, intense dark fruit flavors (think blackberry, plum, cherry)", keywords: ["bold", "fruit-forward", "rich", "intense"] },
            { description: "Elegant and silky with smooth, refined texture and polished tannins (think cherry, raspberry, tea)", keywords: ["elegant", "silky", "smooth", "refined", "polished"] },
            { description: "Earthy and savory with herbal, mineral, and leather notes (think tobacco, herbs, earth)", keywords: ["earthy", "savory", "herbs", "minerals", "leather"] },
            { description: "Spicy and complex with layers of pepper, clove, and warm spices (think black pepper, cinnamon, cardamom)", keywords: ["spice", "spicy", "complex", "pepper", "clove", "cinnamon"] },
            { description: "Chocolatey and rich with dark cocoa, mocha, and espresso notes (think dark chocolate, coffee, cocoa)", keywords: ["chocolate", "cocoa", "mocha", "espresso", "coffee"] },
            { description: "Velvety and plush with luxurious texture and soft, lush mouthfeel (think black currant, cassis, vanilla, silk)", keywords: ["velvety", "plush", "luxurious", "lush"] },
            { description: "Full-bodied and structured with firm tannins and dense concentration (think black currant, plum, raspberry, fig, cedar)", keywords: ["full-bodied", "structured", "firm", "dense"] },
            { description: "Floral and aromatic with violet, rose petal, and lavender notes (think violets, roses, florals)", keywords: ["floral", "violets", "rose", "lavender", "aromatic"] },
            { description: "Dark fruit dominant with concentrated blackberry, black currant, and plum (think inky dark fruit, currant, blueberry, fig)", keywords: ["blackberry", "blackcurrant", "plum", "dark cherry", "currant", "blueberry", "fig", "raspberry"] }
        ];

        let wines = [...allWines];
        let currentIndex = 0;
        let isFlipped = false;
        let currentMode = 'flashcard';
        let currentFilter = { type: 'all' };
        
        // Quiz state
        let quizScore = 0;
        let quizTotal = 0;
        let currentQuizProfile = null;
        let quizAnswered = false;

        function setMode(mode) {
            currentMode = mode;
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            if (mode === 'flashcard') {
                document.getElementById('flashcardMode').style.display = 'block';
                document.getElementById('quizMode').style.display = 'none';
                document.getElementById('filterSection').style.display = 'block';
            } else {
                document.getElementById('flashcardMode').style.display = 'none';
                document.getElementById('quizMode').style.display = 'block';
                document.getElementById('filterSection').style.display = 'block'; // Keep filters visible in quiz mode
                resetQuiz();
                generateQuizQuestion();
            }
        }

        function setFilter(type, value = null) {
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            if (type === 'all') {
                wines = [...allWines];
                currentFilter = { type: 'all' };
            } else if (type === 'region') {
                wines = allWines.filter(w => w.continent === value);
                currentFilter = { type: 'region', value };
            } else if (type === 'varietal') {
                wines = allWines.filter(w => w.type === value);
                currentFilter = { type: 'varietal', value };
            }
            
            currentIndex = 0;
            displayCard();
            
            // If in quiz mode, reset and generate new question with filtered wines
            if (currentMode === 'quiz') {
                resetQuiz();
                generateQuizQuestion();
            }
        }

        function displayCard() {
            if (wines.length === 0) return;
            const wine = wines[currentIndex];
            document.getElementById('wineName').textContent = wine.name;
            document.getElementById('wineType').textContent = wine.type;
            document.getElementById('wineRegion').textContent = wine.region;
            document.getElementById('wineDetails').textContent = wine.details;
            document.getElementById('progress').textContent = `Card ${currentIndex + 1} of ${wines.length}`;
            
            if (isFlipped) {
                flipCard();
            }
        }

        function flipCard() {
            const card = document.getElementById('card');
            card.classList.toggle('flipped');
            isFlipped = !isFlipped;
        }

        function nextCard() {
            currentIndex = (currentIndex + 1) % wines.length;
            displayCard();
        }

        function previousCard() {
            currentIndex = (currentIndex - 1 + wines.length) % wines.length;
            displayCard();
        }

        function shuffleCards() {
            for (let i = wines.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [wines[i], wines[j]] = [wines[j], wines[i]];
            }
            currentIndex = 0;
            displayCard();
        }

        function resetProgress() {
            currentIndex = 0;
            displayCard();
        }

        // Quiz Functions
        function resetQuiz() {
            quizScore = 0;
            quizTotal = 0;
            updateQuizScore();
        }

        function updateQuizScore() {
            document.getElementById('quizScore').textContent = `Score: ${quizScore} / 10`;
        }

        function generateQuizQuestion() {
            // Check if we've completed 10 questions
            if (quizTotal >= 10) {
                const finalScore = quizScore;
                resetQuiz();
                // Show a brief message about the score before starting new round
                const feedbackDiv = document.getElementById('quizFeedback');
                feedbackDiv.className = 'quiz-feedback correct';
                feedbackDiv.textContent = `üéâ Round complete! You scored ${finalScore}/10. Starting new round...`;
                feedbackDiv.style.display = 'block';
                setTimeout(() => {
                    feedbackDiv.style.display = 'none';
                }, 2000);
            }
            
            quizAnswered = false;
            document.getElementById('quizFeedback').style.display = 'none';
            
            // Pick a random flavor profile
            currentQuizProfile = flavorProfiles[Math.floor(Math.random() * flavorProfiles.length)];
            
            // Find wines that match this profile from the filtered wines list
            const matchingWines = wines.filter(wine => 
                currentQuizProfile.keywords.some(keyword => 
                    wine.flavors.some(flavor => flavor.toLowerCase().includes(keyword.toLowerCase()))
                )
            );
            
            if (matchingWines.length === 0) {
                generateQuizQuestion();
                return;
            }
            
            // Pick a correct answer
            const correctWine = matchingWines[Math.floor(Math.random() * matchingWines.length)];
            
            // Pick 3 random incorrect answers from the filtered wines
            const incorrectWines = wines
                .filter(w => w.name !== correctWine.name)
                .sort(() => 0.5 - Math.random())
                .slice(0, 3);
            
            // Combine and shuffle
            const options = [correctWine, ...incorrectWines].sort(() => 0.5 - Math.random());
            
            // Display question
            document.getElementById('quizQuestion').textContent = 
                `Which wine best matches: "${currentQuizProfile.description}"?`;
            
            // Display options
            const optionsContainer = document.getElementById('quizOptions');
            optionsContainer.innerHTML = '';
            
            options.forEach(wine => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'quiz-option';
                optionDiv.innerHTML = `
                    <strong>${wine.name}</strong><br>
                    <small>${wine.type} - ${wine.region}</small>
                `;
                optionDiv.onclick = () => checkAnswer(wine, correctWine, optionDiv);
                optionsContainer.appendChild(optionDiv);
            });
        }

        function checkAnswer(selectedWine, correctWine, selectedDiv) {
            if (quizAnswered) return;
            
            quizAnswered = true;
            quizTotal++;
            
            const allOptions = document.querySelectorAll('.quiz-option');
            allOptions.forEach(opt => opt.classList.add('disabled'));
            
            const feedbackDiv = document.getElementById('quizFeedback');
            
            if (selectedWine.name === correctWine.name) {
                quizScore++;
                selectedDiv.classList.add('correct');
                feedbackDiv.className = 'quiz-feedback correct';
                
                // Get key flavors from the correct wine
                const correctFlavors = correctWine.flavors.slice(0, 5).join(', ');
                
                feedbackDiv.innerHTML = `‚úì Correct! <strong>${correctWine.name}</strong> is ${currentQuizProfile.description.toLowerCase()} with flavors of: ${correctFlavors}.`;
            } else {
                selectedDiv.classList.add('incorrect');
                // Highlight the correct answer
                allOptions.forEach(opt => {
                    if (opt.textContent.includes(correctWine.name)) {
                        opt.classList.add('correct');
                    }
                });
                feedbackDiv.className = 'quiz-feedback incorrect';
                
                // Get key flavors from both wines
                const selectedFlavors = selectedWine.flavors.slice(0, 5).join(', ');
                const correctFlavors = correctWine.flavors.slice(0, 5).join(', ');
                
                feedbackDiv.innerHTML = `‚úó Not quite. You chose <strong>${selectedWine.name}</strong>, which has flavors of: ${selectedFlavors}.<br><br>The best match was <strong>${correctWine.name}</strong>, which is ${currentQuizProfile.description.toLowerCase()} with flavors of: ${correctFlavors}.`;
            }
            
            feedbackDiv.style.display = 'block';
            updateQuizScore();
        }

        function nextQuizQuestion() {
            generateQuizQuestion();
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (currentMode === 'flashcard') {
                if (e.key === 'ArrowRight') nextCard();
                if (e.key === 'ArrowLeft') previousCard();
                if (e.key === ' ') {
                    e.preventDefault();
                    flipCard();
                }
            }
        });

        // Initialize
        displayCard();
    </script>
</body>
</html>
